<ng-content></ng-content>
<ng-container *ngIf="ecTrackProperties$|async as ecTrackProperties">
  <ion-header class="ion-no-border">
    <ion-toolbar class="webmapp-track-details-toolbar">
      <span
        *ngIf="ecTrackProperties?.name"
        [innerHtml]="ecTrackProperties?.name | wmtrans"
        class="wm-track-details-header"
      ></span>
      <ion-buttons slot="end">
        <ion-button class="webmapp-track-details-dismiss" (click)="close()">
          <ion-icon name="close"></ion-icon>
        </ion-button>
      </ion-buttons>
    </ion-toolbar>
  </ion-header>
  <wm-track-alert
    *ngIf="ecTrackProperties?.not_accessible != null && ecTrackProperties?.not_accessible === true"
    [alert]="ecTrackProperties?.not_accessible_message"
  ></wm-track-alert>
  <wm-track-edges [properties]="ecTrackProperties" [conf]="currentLayer$|async"></wm-track-edges>
  <ng-container *ngIf="confOPTIONS$|async as confOPTIONS">
    <wm-travel-mode *ngIf="confOPTIONS.showTravelMode"></wm-travel-mode>
  </ng-container>
  <div *ngIf="flowLineQuoteShow$|async" class="wm-flowline">
    <ion-label
      *ngIf="flowLineQuoteHtml$|async as flowLineQuoteHtml"
      [innerHTML]="flowLineQuoteHtml"
    ></ion-label>
  </div>
  <wm-slope-chart
    (hover)="onLocationHover($event)"
    [currentTrack]="ecTrack$|async"
    id="webmapp-track-details-elevation-chart"
  >
  </wm-slope-chart>
  <ng-container *ngIf="confOPTIONS$|async as confOPTIONS">
    <wm-get-directions *ngIf="confOPTIONS.showGetDirections"></wm-get-directions>
  </ng-container>
  <wm-tab-detail class="webmapp-route-tab" [properties]="ecTrackProperties"></wm-tab-detail>
  <wm-tab-howto
    *ngIf="ecTrackProperties?.taxonomy?.activity"
    [properties]="ecTrackProperties"
  ></wm-tab-howto>
  <wm-tab-image-gallery
    *ngIf="ecTrackProperties?.image_gallery?.length"
    [imageGallery]="ecTrackProperties?.image_gallery"
  ></wm-tab-image-gallery>

  <wm-tab-description
    *ngIf="ecTrackProperties?.description != null"
    [description]="ecTrackProperties?.description"
  ></wm-tab-description>
  <ng-container *ngIf="ecTrackProperties.related_pois?.length > 0">
    <div class="wm-track-details-track-related-poi">
      <wm-track-related-poi></wm-track-related-poi>
    </div>
  </ng-container>
  <wm-track-audio
    *ngIf="ecTrackProperties.audio"
    [audio]="ecTrackProperties.audio"
  ></wm-track-audio>
  <div class="wm-track-details-download" *ngIf="confOPTIONS$|async as confOPTIONS">
    <ng-container *ngIf="confOPTIONS.download_track_enable === true">
      <wm-feature-useful-urls
        class="wm-track-details-download-urls"
        [track]="ecTrack$|async"
        id="webmapp-track-details-download-urls"
      >
        <ng-content></ng-content>
        <wm-related-urls *ngIf="ecTrackProperties?.related_url as relatedUrl" [relatedUrls]="relatedUrl"></wm-related-urls>
      </wm-feature-useful-urls>
    </ng-container>
  </div>
  <ng-content select="[bottom]"></ng-content>
</ng-container>
