<ng-container *ngIf="(currentImageGallery$ | async) as currentImageGallery">
  <ng-container *ngIf="(currentImageGalleryIndex$|async) as currentImageGalleryIndex">
    <swiper-container #gallery class="gallery" [config]="slideOptions" (swipertouchend)="updateIdx()">
      <swiper-slide *ngFor="let image of currentImageGallery;">
        <wm-img [src]="image.url"></wm-img>
        <ion-text
          class="image-name"
          *ngIf="image.name && (confOPTIONSShowMediaName$|async)"
        >{{image.name|wmtrans}}</ion-text>
        <wm-inner-component-html
          class="image-caption"
          [enableDismiss]="false"
          *ngIf="image.caption"
          [html]="image.caption|wmtrans"
        >
        </wm-inner-component-html>
      </swiper-slide>
    </swiper-container>
    <ng-container *ngIf="currentImageGallery.length > 1">
      <div class="footer">
        <ion-button
          (click)="prev()"
          [class.disabled]="currentImageGalleryIndex == 1"
          size="small"
          color="light"
        >
          <ion-icon name="arrow-back"></ion-icon>
        </ion-button>
        <div class="image-counter">
          {{currentImageGalleryIndex}} di {{currentImageGallery.length}}
        </div>
        <ion-button
          (click)="next()"
          [class.disabled]="currentImageGalleryIndex == currentImageGallery.length"
          size="small"
          color="light"
        >
          <ion-icon name="arrow-forward"></ion-icon>
        </ion-button>
      </div>
    </ng-container>
  </ng-container>
</ng-container>